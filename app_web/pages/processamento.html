<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processamento - Estudo de Vicinais SP</title>    <link rel="icon" type="image/svg+xml" href="../favicon.svg">    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <h1 class="header-title">
                <span class="icon icon-map"></span>
                Estudo de Malha Viária Vicinal - Estado de São Paulo
            </h1>
            <p class="header-subtitle">Análise comparativa da malha rodoviária vicinal: OpenStreetMap vs. DER/SP</p>
        </div>
    </header>

    <!-- NAVIGATION -->
    <nav class="nav">
        <div class="nav-container">
            <ul class="nav-list">
                <li class="nav-item"><a href="../index.html" class="nav-link">Início</a></li>
                <li class="nav-item"><a href="metodologia.html" class="nav-link">Metodologia</a></li>
                <li class="nav-item"><a href="dados.html" class="nav-link">Dados</a></li>
                <li class="nav-item"><a href="processamento.html" class="nav-link active">Processamento</a></li>
                <li class="nav-item"><a href="resultados.html" class="nav-link">Resultados</a></li>
                <li class="nav-item"><a href="metodologia-silvio.html" class="nav-link">Metodologia Silvio</a></li>
                <li class="nav-item"><a href="pesquisa-municipal.html" class="nav-link">Pesquisa Municipal</a></li>
            </ul>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <h1 class="page-title">Etapas de Processamento</h1>
        <p class="page-subtitle">Pipeline sequencial com estatísticas de cada fase</p>

        <!-- FLUXOGRAMA -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon icon-arrow"></span>
                Fluxo de Processamento
            </h2>
            
            <div class="section-content">
                <p>O processamento ocorre em 5 etapas principais, cada uma com critérios específicos e estatísticas de redução:</p>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    ETAPA 1: Extração OSM (804.868 features)
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" class="progress-15 bg-gradient-orange">
                    ETAPA 2: Filtros Atributos (123.950 - redução 84,6%)
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" class="progress-12 bg-gradient-green">
                    ETAPA 3: Exclusão Urbana (100.879 - redução 18,6%)
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" class="progress-11 bg-gradient-yellow">
                    ETAPA 4: Subtração DER (95.177 - redução 5,7%)
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" class="progress-2 bg-gradient-blue">
                    ETAPA 5: Conectadas SRE (16.647 - 17,5% do total)
                </div>
            </div>
        </section>

        <!-- ETAPA 1 -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon">1</span>
                Etapa 1: Extração e Conversão PBF
            </h2>
            
            <div class="section-content">
                <p><strong>Script:</strong> <code>converter_pbf_gpkg.py</code></p>
                <p><strong>Objetivo:</strong> Extrair highways do arquivo PBF Geofabrik e converter para GeoPackage.</p>
            </div>

            <h3 class="section-subtitle">Processo:</h3>
            <div class="section-content">
                <ol class="list-spaced">
                    <li><strong>Leitura PBF:</strong> Arquivo <code>sudeste-251111.osm.pbf</code> (788 MB)</li>
                    <li><strong>Filtro Espacial:</strong> Ways com pelo menos 1 nó dentro dos bounds de SP</li>
                    <li><strong>Filtro Highway:</strong> Apenas ways com tag <code>highway=*</code></li>
                    <li><strong>Extração Atributos:</strong> osm_id, name, highway, ref, surface, lanes, maxspeed, oneway</li>
                    <li><strong>Criação Geometrias:</strong> LineStrings a partir das coordenadas dos nós</li>
                    <li><strong>GeoDataFrame:</strong> Construção com CRS EPSG:4326</li>
                    <li><strong>Cálculo Comprimento:</strong> Reprojeção para UTM e cálculo métrico</li>
                    <li><strong>Exportação:</strong> Salvamento como <code>osm_sp_linhas.gpkg</code></li>
                </ol>
            </div>

            <h3 class="section-subtitle">Estatísticas:</h3>
            <div class="stats-container">
                <div class="stat-box">
                    <span class="stat-value">1.642.474</span>
                    <span class="stat-label">Ways processadas (total)</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">804.868</span>
                    <span class="stat-label">Features extraídas (SP)</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">601.667 km</span>
                    <span class="stat-label">Extensão total</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">~90 min</span>
                    <span class="stat-label">Tempo de processamento</span>
                </div>
            </div>

            <h3 class="section-subtitle">Distribuição Inicial por Highway:</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Tipo</th>
                            <th>Quantidade</th>
                            <th>%</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>residential</td>
                            <td>734.332</td>
                            <td>91,2%</td>
                        </tr>
                        <tr>
                            <td>service</td>
                            <td>237.465</td>
                            <td>29,5%</td>
                        </tr>
                        <tr>
                            <td>unclassified</td>
                            <td>193.940</td>
                            <td>24,1%</td>
                        </tr>
                        <tr>
                            <td>tertiary</td>
                            <td>85.595</td>
                            <td>10,6%</td>
                        </tr>
                        <tr>
                            <td>secondary</td>
                            <td>58.512</td>
                            <td>7,3%</td>
                        </tr>
                        <tr>
                            <td>primary</td>
                            <td>26.539</td>
                            <td>3,3%</td>
                        </tr>
                        <tr>
                            <td>Outros</td>
                            <td>306.091</td>
                            <td>38,0%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ETAPA 2 -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon">2</span>
                Etapa 2: Filtros de Atributos
            </h2>
            
            <div class="section-content">
                <p><strong>Script:</strong> <code>extrair_malha_municipal.py</code></p>
                <p><strong>Objetivo:</strong> Aplicar filtros baseados em highway, ref e name para isolar vicinais potenciais.</p>
            </div>

            <h3 class="section-subtitle">Sequência de Filtros:</h3>
            <div class="cards-grid">
                <div class="card">
                    <h4 class="card-title">Filtro 1: Highway</h4>
                    <div class="card-content">
                        <strong>Mantidos:</strong> unclassified, tertiary, secondary, primary<br>
                        <strong>Resultado:</strong> 364.586 → 206.866 features<br>
                        <strong>Redução:</strong> 43,3%
                    </div>
                </div>
                <div class="card">
                    <h4 class="card-title">Filtro 2: Ref</h4>
                    <div class="card-content">
                        <strong>Excluídos:</strong> BR-*, SP-* (exceto SPA/SPI/SPM)<br>
                        <strong>Resultado:</strong> 206.866 → 195.775 features<br>
                        <strong>Redução:</strong> 5,4%
                    </div>
                </div>
                <div class="card">
                    <h4 class="card-title">Filtro 3: Name</h4>
                    <div class="card-content">
                        <strong>Excluídos:</strong> Rua*, Avenida*, Alameda*, etc<br>
                        <strong>Resultado:</strong> 195.775 → 123.950 features<br>
                        <strong>Redução:</strong> 36,7%
                    </div>
                </div>
            </div>

            <h3 class="section-subtitle">Resultado Final Etapa 2:</h3>
            <div class="stats-container">
                <div class="stat-box">
                    <span class="stat-value">123.950</span>
                    <span class="stat-label">Features mantidas</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">680.918</span>
                    <span class="stat-label">Features removidas</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">84,6%</span>
                    <span class="stat-label">Taxa de redução</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">126.177 km</span>
                    <span class="stat-label">Extensão resultante</span>
                </div>
            </div>

            <h3 class="section-subtitle">Distribuição por Highway (após filtros):</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Tipo</th>
                            <th>Quantidade</th>
                            <th>%</th>
                            <th>km</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>unclassified</td>
                            <td>68.234</td>
                            <td>55,0%</td>
                            <td>72.845</td>
                        </tr>
                        <tr>
                            <td>tertiary</td>
                            <td>38.912</td>
                            <td>31,4%</td>
                            <td>38.156</td>
                        </tr>
                        <tr>
                            <td>secondary</td>
                            <td>12.458</td>
                            <td>10,1%</td>
                            <td>11.234</td>
                        </tr>
                        <tr>
                            <td>primary</td>
                            <td>4.346</td>
                            <td>3,5%</td>
                            <td>3.942</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="alert alert-info">
                <strong>Insight:</strong> A categoria <code>unclassified</code> representa mais da metade das vicinais identificadas, confirmando sua importância na rede rural.
            </div>
        </section>

        <!-- ETAPA 3 -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon">3</span>
                Etapa 3: Exclusão de Áreas Urbanas
            </h2>
            
            <div class="section-content">
                <p><strong>Script:</strong> <code>filtro_area_urbana.py</code></p>
                <p><strong>Objetivo:</strong> Remover segmentos dentro de perímetros urbanos IBGE 2019.</p>
            </div>

            <h3 class="section-subtitle">Processo:</h3>
            <div class="section-content">
                <ol class="list-spaced">
                    <li><strong>Carregamento:</strong> 
                        <ul class="list-compact">
                            <li>Vicinais filtradas: <code>base_linhas.gpkg</code> (123.950 features)</li>
                            <li>Áreas urbanas: <code>au_ibge.gpkg</code> (24.186 polígonos)</li>
                        </ul>
                    </li>
                    <li><strong>Reprojeção:</strong> Ambos os datasets para EPSG:31983 (SIRGAS 2000 UTM 23S)</li>
                    <li><strong>Indexação Espacial:</strong> Criação de índice RTree para performance</li>
                    <li><strong>Intersecção:</strong> Identificar segmentos que cruzam ou estão contidos em áreas urbanas</li>
                    <li><strong>Filtragem:</strong> Remover segmentos intersectados</li>
                    <li><strong>Cálculo Extensão:</strong> Comprimento em metros para cada segmento remanescente</li>
                    <li><strong>Exportação:</strong> <code>vicinais_sp.gpkg</code></li>
                </ol>
            </div>

            <h3 class="section-subtitle">Estatísticas:</h3>
            <div class="stats-container">
                <div class="stat-box">
                    <span class="stat-value">23.071</span>
                    <span class="stat-label">Segmentos removidos</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">100.879</span>
                    <span class="stat-label">Segmentos mantidos</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">18,6%</span>
                    <span class="stat-label">Taxa de exclusão</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">124.098 km</span>
                    <span class="stat-label">Extensão rural</span>
                </div>
            </div>

            <h3 class="section-subtitle">Análise de Impacto:</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Métrica</th>
                            <th>Antes</th>
                            <th>Depois</th>
                            <th>Diferença</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Features</strong></td>
                            <td>123.950</td>
                            <td>100.879</td>
                            <td>-23.071 (-18,6%)</td>
                        </tr>
                        <tr>
                            <td><strong>Extensão (km)</strong></td>
                            <td>126.177</td>
                            <td>124.098</td>
                            <td>-2.079 (-1,6%)</td>
                        </tr>
                        <tr>
                            <td><strong>Comprimento Médio (m)</strong></td>
                            <td>1.018</td>
                            <td>1.230</td>
                            <td>+212 (+20,8%)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="alert alert-success">
                <strong>Observação:</strong> Apesar de remover 18,6% dos segmentos, a extensão diminui apenas 1,6%, indicando que os segmentos urbanos excluídos eram predominantemente curtos (média 90m).
            </div>
        </section>

        <!-- ETAPA 4 -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon">4</span>
                Etapa 4: Subtração da Malha DER
            </h2>
            
            <div class="section-content">
                <p><strong>Script:</strong> <code>refinar_subtrair_der.py</code></p>
                <p><strong>Objetivo:</strong> Remover segmentos que coincidem com rodovias municipais cadastradas no DER.</p>
            </div>

            <h3 class="section-subtitle">Algoritmo Buffer + Threshold:</h3>
            <div class="section-content">
                <pre><code>PARÂMETROS:
- Buffer DER: 15 metros
- Threshold overlap: > 50%
- CRS: EPSG:31983

PARA cada segmento OSM:
    1. Calcular comprimento_total
    2. Intersectar com buffer_DER
    3. Calcular comprimento_dentro_buffer
    4. Calcular percentual = comprimento_dentro / comprimento_total
    5. SE percentual > 0.5:
        REMOVER (coincide majoritariamente com DER)
    6. SENÃO:
        MANTER (é vicinal independente)</code></pre>
            </div>

            <h3 class="section-subtitle">Processo Detalhado:</h3>
            <div class="section-content">
                <ol class="list-spaced">
                    <li><strong>Carregamento:</strong>
                        <ul class="list-compact">
                            <li>Vicinais rurais: <code>vicinais_sp.gpkg</code> (100.879 features)</li>
                            <li>Malha DER: <code>Rodovias_municipais_*.shp</code> (7.417 features)</li>
                        </ul>
                    </li>
                    <li><strong>Reprojeção:</strong> Garantir ambos em UTM 23S</li>
                    <li><strong>Buffer DER:</strong> Criar faixa de 15m ao redor de cada rodovia DER</li>
                    <li><strong>Dissolve Buffer:</strong> Unir buffers sobrepostos para otimização</li>
                    <li><strong>Cálculo Overlap:</strong> Para cada segmento OSM:
                        <ul class="list-compact">
                            <li>Intersectar com buffer DER dissolúvido</li>
                            <li>Calcular comprimento da interseção</li>
                            <li>Dividir pelo comprimento total do segmento</li>
                        </ul>
                    </li>
                    <li><strong>Decisão:</strong> Remover se overlap > 50%</li>
                    <li><strong>Exportação:</strong> <code>vicinais_simples.gpkg</code></li>
                </ol>
            </div>

            <h3 class="section-subtitle">Estatísticas:</h3>
            <div class="stats-container">
                <div class="stat-box">
                    <span class="stat-value">5.702</span>
                    <span class="stat-label">Segmentos removidos</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">95.177</span>
                    <span class="stat-label">Segmentos mantidos</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">5,7%</span>
                    <span class="stat-label">Taxa de sobreposição</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">122.243 km</span>
                    <span class="stat-label">Extensão final (vicinais)</span>
                </div>
            </div>

            <h3 class="section-subtitle">Distribuição de Overlap:</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Faixa Overlap</th>
                            <th>Segmentos</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0% (sem overlap)</td>
                            <td>92.345</td>
                            <td class="text-success">MANTIDOS</td>
                        </tr>
                        <tr>
                            <td>0,1% - 10%</td>
                            <td>1.823</td>
                            <td class="text-success">MANTIDOS</td>
                        </tr>
                        <tr>
                            <td>10% - 25%</td>
                            <td>687</td>
                            <td class="text-success">MANTIDOS</td>
                        </tr>
                        <tr>
                            <td>25% - 50%</td>
                            <td>322</td>
                            <td class="text-success">MANTIDOS</td>
                        </tr>
                        <tr>
                            <td>50% - 75%</td>
                            <td>1.234</td>
                            <td class="text-error">REMOVIDOS</td>
                        </tr>
                        <tr>
                            <td>75% - 100%</td>
                            <td>4.468</td>
                            <td class="text-error">REMOVIDOS</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="alert alert-warning">
                <strong>Threshold Justification:</strong> O valor de 50% equilibra a remoção de duplicatas (evita contar a mesma via duas vezes) com a preservação de vicinais paralelas ou próximas ao DER.
            </div>
        </section>

        <!-- ETAPA 5 -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon">5</span>
                Etapa 5: Análise de Conectividade com SRE
            </h2>
            
            <div class="section-content">
                <p><strong>Script:</strong> <code>refinamento_conectividade.py</code></p>
                <p><strong>Objetivo:</strong> Classificar vicinais quanto à conectividade com o Sistema Rodoviário Estadual/Federal.</p>
            </div>

            <h3 class="section-subtitle">Método:</h3>
            <div class="section-content">
                <ol class="list-spaced">
                    <li><strong>Carregamento SRE:</strong> Rodovias estaduais (SP-*) e federais (BR-*)</li>
                    <li><strong>Buffer 50m:</strong> Zona de influência para detectar proximidade</li>
                    <li><strong>Intersecção:</strong> Identificar vicinais que tocam ou cruzam o buffer SRE</li>
                    <li><strong>Classificação:</strong>
                        <ul class="list-compact">
                            <li><code>conectada = 1</code>: Vicinal com acesso direto ao SRE</li>
                            <li><code>conectada = 0</code>: Vicinal isolada ou conecta apenas a outras vicinais</li>
                        </ul>
                    </li>
                    <li><strong>Exportação:</strong> Adicionar atributo <code>conectada</code> ao dataset final</li>
                </ol>
            </div>

            <h3 class="section-subtitle">Resultados:</h3>
            <div class="stats-container">
                <div class="stat-box">
                    <span class="stat-value">16.647</span>
                    <span class="stat-label">Conectadas ao SRE</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">78.530</span>
                    <span class="stat-label">Não conectadas</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">17,5%</span>
                    <span class="stat-label">Taxa de conectividade</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">16.859 km</span>
                    <span class="stat-label">Extensão conectada</span>
                </div>
            </div>

            <h3 class="section-subtitle">Análise Comparativa:</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Categoria</th>
                            <th>Segmentos</th>
                            <th>%</th>
                            <th>Extensão (km)</th>
                            <th>Comprimento Médio (m)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Conectadas SRE</strong></td>
                            <td>16.647</td>
                            <td>17,5%</td>
                            <td>16.859</td>
                            <td>1.013</td>
                        </tr>
                        <tr>
                            <td><strong>Não Conectadas</strong></td>
                            <td>78.530</td>
                            <td>82,5%</td>
                            <td>105.384</td>
                            <td>1.342</td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL</strong></td>
                            <td>95.177</td>
                            <td>100%</td>
                            <td>122.243</td>
                            <td>1.285</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="alert alert-info">
                <strong>Interpretação:</strong> Vicinais conectadas são ligeiramente mais curtas (média 1.013m vs 1.342m), sugerindo que são principalmente acessos e ramais de ligação com a malha principal.
            </div>

            <h3 class="section-subtitle">Significado da Conectividade:</h3>
            <div class="cards-grid">
                <div class="card">
                    <h4 class="card-title">Vicinais Conectadas (17,5%)</h4>
                    <div class="card-content">
                        <strong>Características:</strong><br>
                        - Acesso direto à malha estadual/federal<br>
                        - Facilitam escoamento produção<br>
                        - Maior importância estratégica<br>
                        - Candidatas a investimento prioritário
                    </div>
                </div>
                <div class="card">
                    <h4 class="card-title">Vicinais Isoladas (82,5%)</h4>
                    <div class="card-content">
                        <strong>Características:</strong><br>
                        - Conectam apenas a outras vicinais<br>
                        - Rede capilar interna<br>
                        - Dependem de vicinais conectadas<br>
                        - Importante para acesso a propriedades
                    </div>
                </div>
            </div>
        </section>

        <!-- RESUMO FINAL -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon icon-check"></span>
                Resumo do Pipeline Completo
            </h2>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Etapa</th>
                            <th>Features Entrada</th>
                            <th>Features Saída</th>
                            <th>Redução</th>
                            <th>Extensão (km)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>0. Extração OSM</strong></td>
                            <td>-</td>
                            <td>804.868</td>
                            <td>-</td>
                            <td>601.667</td>
                        </tr>
                        <tr>
                            <td><strong>1. Filtros Atributos</strong></td>
                            <td>804.868</td>
                            <td>123.950</td>
                            <td>-84,6%</td>
                            <td>126.177</td>
                        </tr>
                        <tr>
                            <td><strong>2. Exclusão Urbana</strong></td>
                            <td>123.950</td>
                            <td>100.879</td>
                            <td>-18,6%</td>
                            <td>124.098</td>
                        </tr>
                        <tr>
                            <td><strong>3. Subtração DER</strong></td>
                            <td>100.879</td>
                            <td>95.177</td>
                            <td>-5,7%</td>
                            <td>122.243</td>
                        </tr>
                        <tr>
                            <td><strong>4. Conectividade</strong></td>
                            <td>95.177</td>
                            <td>16.647 (conectadas)</td>
                            <td>17,5%</td>
                            <td>16.859</td>
                        </tr>
                        <tr class="bg-light-gray bold">
                            <td><strong>TOTAL</strong></td>
                            <td>804.868</td>
                            <td>95.177</td>
                            <td>-88,2%</td>
                            <td>122.243</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="stats-container mt-2">
                <div class="stat-box">
                    <span class="stat-value">88,2%</span>
                    <span class="stat-label">Redução total (features)</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">79,7%</span>
                    <span class="stat-label">Redução extensão (km)</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">95.177</span>
                    <span class="stat-label">Vicinais finais</span>
                </div>
                <div class="stat-box">
                    <span class="stat-value">122.243 km</span>
                    <span class="stat-label">Extensão total vicinais</span>
                </div>
            </div>
        </section>

        <!-- PERFORMANCE -->
        <section class="section">
            <h2 class="section-title">
                <span class="icon icon-settings"></span>
                Performance e Otimizações
            </h2>
            
            <div class="section-content">
                <h3 class="section-subtitle">Técnicas de Otimização:</h3>
                <ul class="list-spaced">
                    <li><strong>Indexação Espacial:</strong> RTree para intersecções rápidas (reduz complexidade de O(n²) para O(n log n))</li>
                    <li><strong>Dissolve Buffers:</strong> Unir buffers DER sobrepostos reduz número de geometrias a testar</li>
                    <li><strong>Batching:</strong> Processar geometrias em lotes para aproveitar paralelização do GeoPandas</li>
                    <li><strong>CRS Consistente:</strong> Reprojeção única no início evita múltiplas transformações</li>
                    <li><strong>Formatos Otimizados:</strong> GeoPackage com índices espaciais automáticos</li>
                </ul>

                <h3 class="section-subtitle">Tempo de Execução (hardware padrão):</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Etapa</th>
                                <th>Tempo Aproximado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Extração PBF</td>
                                <td>~90 minutos</td>
                            </tr>
                            <tr>
                                <td>Filtros Atributos</td>
                                <td>~15 minutos</td>
                            </tr>
                            <tr>
                                <td>Exclusão Urbana</td>
                                <td>~25 minutos</td>
                            </tr>
                            <tr>
                                <td>Subtração DER</td>
                                <td>~35 minutos</td>
                            </tr>
                            <tr>
                                <td>Conectividade SRE</td>
                                <td>~20 minutos</td>
                            </tr>
                            <tr class="bold">
                                <td><strong>TOTAL</strong></td>
                                <td><strong>~3 horas</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">Estudo de Malha Viária Vicinal - Estado de São Paulo | Janeiro 2026</p>
            <p class="footer-text">Dados: OpenStreetMap (Geofabrik) | IBGE | DER/SP</p>
        </div>
    </footer>

    <script src="../js/main.js"></script>
</body>
</html>
